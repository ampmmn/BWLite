# logger

ログ関係の処理を置くディレクトリ  
いっても、実際のログ出力処理は[spdlog](https://github.com/gabime/spdlog)を使っている。  
ここではspdlogの初期化とか、アプリ設定と連動した処理などを実装している

## ログ出力に関する仕様

- 設定ファイル保存先ディレクトリに`<アプリ名>.log` のファイル名でログファイルを出力する
- 8MBを上限として3世代までログローテートする(はず)
- 3秒ごとにフラッシュする

- spdがサポートするログレベルのうち、このアプリではError/Warning/Info/Debugのみを使用する

### 出力形式

```
YYYY-MM-DD HH:MM:SS.sss [TTTTT] [level]:function:message
```

- YYYY : 西暦4桁
- MM : 月2桁
- DD : 日2桁
- HH : 時2桁
- SS : 秒2桁
- sss : ミリ秒3桁
- TTTTT : スレッドID
- level : ログレベル(E or W or I or D)
  - E : エラー
  - W : 警告
  - I : 通常のメッセージ
  - D : デバッグ用のメッセージ
- function : 関数名(出さない場合もある)
- message : ログメッセージ

## クラス

### Logger

spdlogを使うための初期化処理を行うシングルトンクラス  
内包するPImplクラスでアプリ設定変更イベントを受け取る
アプリ設定変更時にログレベルを再設定する

##### 初期化処理で行うspdlog周りの処理

- ロガー作成
  - ログファイル出力先パスの決定
  - ログローテート設定
- ログレベル設定
- 出力時のフォーマット設定
- ログのフラッシュ間隔設定
- 作成したloggerをデフォルトロガーとして設定する


